import os
import pandas as pd
feature_vector = {}  # dictionary with indexes mapped to features
index = 0  # index value
feature_vectors_dir = '../eliminated_apps_feature_vectors/'
new_feature_vectors_dir = 'new_feature_vectors/'
if not os.path.exists(new_feature_vectors_dir):
    os.makedirs(new_feature_vectors_dir)

print("Eliminating features with low variance...")

df = pd.read_csv('eliminated_variance.csv')
column = df[df.columns[0]]
features = column.tolist()
print(features)


for filename in os.listdir(feature_vectors_dir):  # read all apps
    with open(feature_vectors_dir + filename, "r") as file:  # open an app
        f = open(new_feature_vectors_dir + filename, "a")  # create a new file with the same SHA name in another dir
        for line in file:  # read app line by line
            feature = line.strip()
            if feature in features:
                f.write(feature + "\n")
print("finished!")
