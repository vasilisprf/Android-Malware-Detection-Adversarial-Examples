import os

feature_vector = {}  # dictionary with indexes mapped to features
index = 0  # index value
feature_vectors_dir = 'eliminated_apps_feature_vectors/'
new_feature_vectors_dir = 'new_feature_vectors/'
if not os.path.exists(new_feature_vectors_dir):
    os.makedirs(new_feature_vectors_dir)

not_assignable_feature_type = ['']  # found from extract_feature_types.py

print("Eliminating urls & activities...")
for filename in os.listdir(feature_vectors_dir):  # read all apps
    with open(feature_vectors_dir + filename, "r") as file:  # open an app
        f = open(new_feature_vectors_dir + filename, "a")  # create a new file with the same SHA name in another dir
        for line in file:  # read app line by line
            feature_type = line[:line.find('::')]  # extract feature type
            feature = line.strip()  # remove whitespace chars
            if feature_type not in not_assignable_feature_type:  # check if feature type is ''
                if feature_type != "url" and feature_type != "activity" and \
                        feature != "feature::android.hardware.touchscreen" and \
                        feature != "intent::android.intent.action.MAIN" and \
                        feature != "intent::android.intent.category.LAUNCHER" and \
                        feature != "call::getSystemService" and \
                        feature != "real_permission::android.permission.INTERNET" and \
                        feature != "permission::android.permission.INTERNET":

                    f.write(feature + "\n")

print("finished!")
